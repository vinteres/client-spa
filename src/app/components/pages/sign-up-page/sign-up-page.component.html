<div class="page-cont shadow-sm">
  <app-title></app-title>

  <div class="app-info">
    <app-info></app-info>
  </div>

  <div class="auth-cont">
    <div style="padding: 10px">
      <h1>Sign up</h1>
      <div *ngIf="!showForm">
        <div>User created successfully</div>
        <button class="btn btn-light" type="button" (click)="login()">Go to login</button>
      </div>

      <div *ngIf="showForm">
        <form (ngSubmit)="signup(registerForm)" #registerForm="ngForm" [formGroup]="form">
          <div class="form-group inp-cont">
            <input type="email"
                   class="form-control"
                   name="email"
                   placeholder="Email"
                   formControlName="email"
                   [ngClass]="{'error-inp': ((email.dirty || email.touched) && !email.valid)}"
                   [readonly]="loading"
                   required>

            <small class="text-danger" *ngIf="(email.dirty || email.touched) && !email.valid" class="text-danger">
              <div *ngIf="email.hasError('required')">Email is required.</div>
              <div *ngIf="email.hasError('email')">Email is invalid.</div>
              <div *ngIf="email.hasError('exists')">Email is already registered.</div>
            </small>
          </div>
          <div class="form-group inp-cont">
            <input type="text"
                   class="form-control"
                   name="name"
                   placeholder="Name"
                   formControlName="name"
                   [ngClass]="{'error-inp': ((name.dirty || name.touched) && !name.valid)}"
                   [readonly]="loading"
                   required>
            <small class="text-danger" *ngIf="(name.dirty || name.touched) && !name.valid" class="text-danger">
              Name is invalid.
            </small>
          </div>
          <div class="form-group inp-cont">
            <input type="password"
                   class="form-control auth-inp"
                   name="password"
                   placeholder="Password"
                   formControlName="password"
                   [ngClass]="{'error-inp': ((password.dirty || password.touched) && !password.valid)}"
                   [readonly]="loading"
                   required>

            <small class="text-danger" *ngIf="(password.dirty || password.touched) && !password.valid" class="text-danger">
              <div class="alert alert-warning">
                <div class="pwd-item">
                  <fa-icon *ngIf="password.value.length >= 8" [icon]="faCheck"></fa-icon> 8+ length
                </div>
                <div class="pwd-item">
                  <fa-icon *ngIf="hasUppercase(password.value)" [icon]="faCheck"></fa-icon> [A-Z]
                </div>
                <div class="pwd-item">
                  <fa-icon *ngIf="hasLowercase(password.value)" [icon]="faCheck"></fa-icon> [a-z]
                </div>
                <div class="pwd-item">
                  <fa-icon *ngIf="hasNumber(password.value)" [icon]="faCheck"></fa-icon> [0-9]
                </div>
                <div class="pwd-item">
                  <fa-icon *ngIf="hasSpecialChar(password.value)" [icon]="faCheck"></fa-icon> [#?!@$%^&*-]
                </div>
              </div>
              <div>Password is invalid.</div>
            </small>
          </div>
          <div class="form-group inp-cont">
            <input type="password"
                   class="form-control auth-inp"
                   name="confirmPassword"
                   placeholder="Confirm password"
                   formControlName="confirmPassword"
                   [ngClass]="{'error-inp': ((confirmPassword.dirty || confirmPassword.touched) && !confirmPassword.valid)}"
                   [readonly]="loading"
                   required>

            <small class="text-danger" *ngIf="(confirmPassword.dirty || confirmPassword.touched) && !confirmPassword.valid" class="text-danger">
              Confirm password
            </small>
          </div>
          <button class="btn btn-outline-primary" type="submit" [disabled]="loading">Sign up</button>
          <div style="margin: 15px 0">
            If you already have an account you can <a routerLink="/login">sign in here</a>.
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
