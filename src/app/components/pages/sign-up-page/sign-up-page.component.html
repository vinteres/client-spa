<div class="bg"></div>
<div class="overlay"></div>

<div class="page-cont">
  <app-title></app-title>

  <div class="auth-cont shadow">
    <h1>{{ 'Sign up' | translate }}</h1>
    <div *ngIf="!showForm">
      <div>User created successfully</div>
      <button class="btn btn-light" type="button" (click)="login()">Go to login</button>
    </div>

    <div *ngIf="showForm">
      <form (ngSubmit)="signup(registerForm)" #registerForm="ngForm" [formGroup]="form">
        <div class="form-group inp-cont">
          <input type="email"
                 class="form-control"
                 name="email"
                 placeholder="{{ 'Email' | translate }}"
                 formControlName="email"
                 [ngClass]="{'error-inp': ((email.dirty || email.touched) && !email.valid)}"
                 [readonly]="loading"
                 required>

          <small class="text-danger" *ngIf="(email.dirty || email.touched) && !email.valid" class="text-danger">
            <!-- <div *ngIf="email.hasError('required')">Email is required.</div> -->
            <div *ngIf="email.hasError('email') || email.hasError('required')">{{ 'Invalid email' | translate }}</div>
            <div *ngIf="email.hasError('exists')">{{ 'Email is already registered' | translate }}</div>
          </small>
        </div>
        <div class="form-group inp-cont">
          <input type="password"
                 class="form-control auth-inp"
                 name="password"
                 placeholder="{{ 'Password' | translate }}"
                 formControlName="password"
                 [ngClass]="{'error-inp': ((password.dirty || password.touched) && !password.valid)}"
                 [readonly]="loading"
                 required>

          <small class="text-danger" *ngIf="(password.dirty || password.touched) && !password.valid" class="text-danger">
            <div class="alert alert-warning">
              <div class="pwd-item">
                <fa-icon *ngIf="password.value.length >= 8" [icon]="faCheck"></fa-icon>
                {{ 'Enter' | translate }} 8+ {{ 'symbols' | translate }}
              </div>
              <!-- <div class="pwd-item">
                <fa-icon *ngIf="hasUppercase(password.value)" [icon]="faCheck"></fa-icon> [A-Z]
              </div>
              <div class="pwd-item">
                <fa-icon *ngIf="hasLowercase(password.value)" [icon]="faCheck"></fa-icon> [a-z]
              </div>
              <div class="pwd-item">
                <fa-icon *ngIf="hasNumber(password.value)" [icon]="faCheck"></fa-icon> [0-9]
              </div>
              <div class="pwd-item">
                <fa-icon *ngIf="hasSpecialChar(password.value)" [icon]="faCheck"></fa-icon> [#?!@$%^&*-]
              </div> -->
            </div>
            <div>{{ 'Invalid password' | translate }}</div>
          </small>
        </div>
        <div class="form-group inp-cont">
          <input type="password"
                 class="form-control auth-inp"
                 name="confirmPassword"
                 placeholder="{{ 'Confirm password' | translate }}"
                 formControlName="confirmPassword"
                 [ngClass]="{'error-inp': ((confirmPassword.dirty || confirmPassword.touched) && !confirmPassword.valid)}"
                 [readonly]="loading"
                 required>

          <small class="text-danger" *ngIf="(confirmPassword.dirty || confirmPassword.touched) && !confirmPassword.valid" class="text-danger">
            {{ 'Confirm password' | translate }}
          </small>
        </div>
        <button class="btn btn-outline-primary" type="submit" [disabled]="loading">{{ 'Sign up' | translate }}</button>

        <div style="text-align: center; margin: 10px 0;">
          {{ 'Or sign up with' | translate }}
        </div>

        <sign-in-with (loadingChanged)="loadingChanged($event)"></sign-in-with>

        <div class="terms-msg">
          {{ "By continuing, you're confirming that you've read and agree to our" | translate }}
          <a [href]="termsAndUsageUrl" target="_blank">{{ 'Terms of Usage' | translate }}</a> {{ 'and' | translate }}
          <a [href]="privacyPolicyUrl" target="_blank">{{ 'Privacy Policy' | translate }}</a>.
        </div>
        <div style="margin: 15px 0">
          {{ 'If you already have an account you can' | translate }} <a routerLink="/login">{{ 'sign in here' | translate }}</a>.
        </div>
      </form>
    </div>
  </div>
</div>
